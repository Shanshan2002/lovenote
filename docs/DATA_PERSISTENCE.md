# ğŸ“¦ æ•°æ®æŒä¹…åŒ–æŒ‡å—

## ğŸ¯ æ•°æ®æŒä¹…åŒ–ä¿è¯

LOVENOTE æä¾›å¤šå±‚æ•°æ®ä¿æŠ¤ï¼Œç¡®ä¿æ‚¨çš„ç”¨æˆ·å’Œæ¶ˆæ¯æ•°æ®æ°¸ä¸ä¸¢å¤±ã€‚

---

## ğŸ”’ æŒä¹…åŒ–æœºåˆ¶

### 1. æœ¬åœ°æ–‡ä»¶å­˜å‚¨
```
data/
â”œâ”€â”€ users.json  # ç”¨æˆ·æ•°æ®
â””â”€â”€ notes.json  # æ¶ˆæ¯æ•°æ®
```

**ç‰¹ç‚¹ï¼š**
- âœ… å®æ—¶å†™å…¥ç£ç›˜
- âœ… ä¸è¢« Git è¿½è¸ªï¼ˆ.gitignoreï¼‰
- âœ… æœ¬åœ°æ°¸ä¹…ä¿å­˜

### 2. å®æ—¶è‡ªåŠ¨å¤‡ä»½
```
data-backups/
â”œâ”€â”€ backup_TIMESTAMP_user_register/
â”œâ”€â”€ backup_TIMESTAMP_message_sent/
â””â”€â”€ backup_TIMESTAMP_user_deleted/
```

**è§¦å‘æ—¶æœºï¼š**
- ğŸ‘¤ ç”¨æˆ·æ³¨å†Œ â†’ è‡ªåŠ¨å¤‡ä»½
- ğŸ’Œ æ¶ˆæ¯å‘é€ â†’ è‡ªåŠ¨å¤‡ä»½
- ğŸ—‘ï¸ ç”¨æˆ·åˆ é™¤ â†’ è‡ªåŠ¨å¤‡ä»½

**ä¿ç•™ç­–ç•¥ï¼š**
- ä¿ç•™æœ€è¿‘ 10 ä¸ªå¤‡ä»½
- å¯åŠ¨æ—¶è‡ªåŠ¨æ¸…ç†æ—§å¤‡ä»½
- å¸¦æ—¶é—´æˆ³å’Œæ“ä½œåŸå› 

### 3. æ‰‹åŠ¨å¤‡ä»½
```bash
# åˆ›å»ºæ‰‹åŠ¨å¤‡ä»½
./scripts/backup-data.sh
```

---

## ğŸ”„ æ•°æ®æ¢å¤å·¥å…·

### ä»å¤‡ä»½æ¢å¤
```bash
# äº¤äº’å¼æ¢å¤å·¥å…·
./scripts/restore-data.sh

# é€‰é¡¹ï¼š
# 1. æ¢å¤æœ€æ–°å¤‡ä»½
# 2. é€‰æ‹©ç‰¹å®šå¤‡ä»½
# 3. å–æ¶ˆ
```

### æ•°æ®å¯¼å‡º
```bash
# å¯¼å‡ºæ•°æ®ï¼ˆç”¨äºè¿ç§»ï¼‰
./scripts/export-data.sh

# è¾“å‡ºï¼šdata-export-TIMESTAMP/
#   â”œâ”€â”€ users.json
#   â”œâ”€â”€ notes.json
#   â””â”€â”€ README.txt
```

### æ•°æ®å¯¼å…¥
```bash
# ä»å¯¼å‡ºæ–‡ä»¶å¤¹å¯¼å…¥
./scripts/import-data.sh data-export-20251121_230000

# è‡ªåŠ¨å¤‡ä»½å½“å‰æ•°æ®
# å¯¼å…¥æ–°æ•°æ®
# é‡å¯æœåŠ¡å™¨
```

---

## ğŸš€ ä¸åŒéƒ¨ç½²ç¯å¢ƒçš„æ•°æ®æŒä¹…åŒ–

### æœ¬åœ°å¼€å‘
**æ•°æ®ä½ç½®ï¼š** `./data/`  
**æŒä¹…åŒ–ï¼š** âœ… è‡ªåŠ¨ï¼ˆæ–‡ä»¶ç³»ç»Ÿï¼‰  
**å¤‡ä»½ï¼š** âœ… è‡ªåŠ¨ + æ‰‹åŠ¨

### Railway éƒ¨ç½²
**æ•°æ®ä½ç½®ï¼š** `/app/data/`  
**æŒä¹…åŒ–æ–¹æ¡ˆï¼š**

#### é€‰é¡¹ 1ï¼šæŒä¹…åŒ–å·ï¼ˆæ¨èï¼‰
```yaml
# railway.json
{
  "volumes": [
    {
      "name": "data",
      "mountPath": "/app/data"
    },
    {
      "name": "backups",
      "mountPath": "/app/data-backups"
    }
  ]
}
```

#### é€‰é¡¹ 2ï¼šå®šæœŸå¯¼å‡º
```bash
# åœ¨ Railway ä¸Šè®¾ç½®å®šæ—¶ä»»åŠ¡
# æ¯å¤©å¯¼å‡ºæ•°æ®åˆ°äº‘å­˜å‚¨ï¼ˆS3/Dropboxï¼‰
```

### Vercel éƒ¨ç½²
âš ï¸ **ä¸æ¨è** - Vercel æ˜¯æ— çŠ¶æ€éƒ¨ç½²ï¼Œä¸æ”¯æŒæ–‡ä»¶æŒä¹…åŒ–  
**æ›¿ä»£æ–¹æ¡ˆï¼š** ä½¿ç”¨å¤–éƒ¨æ•°æ®åº“ï¼ˆMongoDB/PostgreSQLï¼‰

---

## ğŸ“Š æ•°æ®è¿ç§»æŒ‡å—

### åœºæ™¯ 1ï¼šæ›´æ¢å¼€å‘æœºå™¨
```bash
# åœ¨æ—§æœºå™¨ä¸Š
./scripts/export-data.sh
# å¾—åˆ°ï¼šdata-export-TIMESTAMP/

# å‹ç¼©æ–‡ä»¶
zip -r data-export.zip data-export-TIMESTAMP/

# åœ¨æ–°æœºå™¨ä¸Š
unzip data-export.zip
./scripts/import-data.sh data-export-TIMESTAMP/
```

### åœºæ™¯ 2ï¼šä» GitHub å…‹éš†åæ¢å¤æ•°æ®
```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/Shanshan2002/lovenote.git
cd lovenote

# 2. å®‰è£…ä¾èµ–
npm install

# 3. åˆ›å»ºæ•°æ®ç›®å½•
mkdir -p data data-backups

# 4. å¯¼å…¥ä¹‹å‰å¯¼å‡ºçš„æ•°æ®
./scripts/import-data.sh /path/to/data-export-TIMESTAMP/

# 5. å¯åŠ¨æœåŠ¡å™¨
npm start
```

### åœºæ™¯ 3ï¼šéƒ¨ç½²åˆ° Railway
```bash
# 1. åœ¨ Railway ä»ªè¡¨æ¿é…ç½®æŒä¹…åŒ–å·
# Settings â†’ Volumes â†’ Add Volume
# Name: data
# Mount Path: /app/data

# 2. æ·»åŠ å¤‡ä»½å·
# Name: backups
# Mount Path: /app/data-backups

# 3. æ¨é€ä»£ç åˆ° GitHub
git push origin main

# 4. Railway è‡ªåŠ¨éƒ¨ç½²
# æ•°æ®å°†ä¿å­˜åœ¨æŒä¹…åŒ–å·ä¸­
```

---

## ğŸ›¡ï¸ æ•°æ®å®‰å…¨å»ºè®®

### æ—¥å¸¸ä½¿ç”¨
- âœ… å®šæœŸæ‰‹åŠ¨å¤‡ä»½ï¼ˆæ¯å‘¨ï¼‰
- âœ… å¯¼å‡ºé‡è¦æ•°æ®åˆ°å®‰å…¨ä½ç½®
- âœ… æµ‹è¯•æ¢å¤æµç¨‹

### é‡è¦æ“ä½œå‰
- âœ… å¤§é‡åˆ é™¤å‰å…ˆå¤‡ä»½
- âœ… æ›´æ–°ç³»ç»Ÿå‰å…ˆå¤‡ä»½
- âœ… è¿ç§»ç¯å¢ƒå‰å…ˆå¤‡ä»½

### äº‘ç«¯å¤‡ä»½ï¼ˆå¯é€‰ï¼‰
```bash
# ç¤ºä¾‹ï¼šå¤‡ä»½åˆ° Dropbox
./scripts/export-data.sh
zip -r lovenote-backup-$(date +%Y%m%d).zip data-export-*/
# ä¸Šä¼ åˆ° Dropbox/Google Drive
```

---

## ğŸ” æ•°æ®éªŒè¯

### æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
```bash
# æŸ¥çœ‹ç”¨æˆ·æ•°
cat data/users.json | grep -o '"id"' | wc -l

# æŸ¥çœ‹æ¶ˆæ¯æ•°
cat data/notes.json | grep -o '"id"' | wc -l

# æŸ¥çœ‹å¤‡ä»½æ•°
ls -l data-backups/ | grep "^d" | wc -l
```

### éªŒè¯å¤‡ä»½
```bash
# æŸ¥çœ‹æœ€æ–°å¤‡ä»½å†…å®¹
LATEST=$(ls -t data-backups/ | head -1)
cat "data-backups/$LATEST/users.json"
```

---

## ğŸ“‹ æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šæ•°æ®ä¸¢å¤±
**è§£å†³ï¼š**
```bash
# 1. æ£€æŸ¥å¤‡ä»½
ls -lt data-backups/

# 2. æ¢å¤æœ€æ–°å¤‡ä»½
./scripts/restore-data.sh
```

### é—®é¢˜ 2ï¼šå¤‡ä»½å¤ªå¤š
**è§£å†³ï¼š**
```bash
# æ‰‹åŠ¨æ¸…ç†æ—§å¤‡ä»½ï¼ˆä¿ç•™æœ€è¿‘10ä¸ªï¼‰
cd data-backups
ls -t | tail -n +11 | xargs rm -rf
```

### é—®é¢˜ 3ï¼šè¿ç§»åæ•°æ®ä¸å­˜åœ¨
**è§£å†³ï¼š**
```bash
# 1. åˆ›å»ºæ•°æ®ç›®å½•
mkdir -p data

# 2. å¯¼å…¥æ•°æ®
./scripts/import-data.sh /path/to/backup

# 3. é‡å¯æœåŠ¡å™¨
```

---

## ğŸš¨ ç´§æ€¥æ¢å¤

### å¦‚æœæ•°æ®æ–‡ä»¶æŸå
```bash
# 1. åœæ­¢æœåŠ¡å™¨
# Ctrl+C

# 2. æŸ¥çœ‹å¤‡ä»½
ls -lt data-backups/

# 3. æ¢å¤æœ€è¿‘çš„å®Œå¥½å¤‡ä»½
./scripts/restore-data.sh

# 4. é‡å¯æœåŠ¡å™¨
npm start
```

### å¦‚æœæ‰€æœ‰å¤‡ä»½éƒ½ä¸¢å¤±
```bash
# 1. æ£€æŸ¥æ˜¯å¦æœ‰å¯¼å‡ºæ–‡ä»¶
ls -d data-export-*

# 2. å¦‚æœæœ‰ï¼Œå¯¼å…¥å®ƒ
./scripts/import-data.sh data-export-TIMESTAMP/

# 3. å¦‚æœæ²¡æœ‰ï¼Œä» Railway/äº‘ç«¯æ¢å¤
# ï¼ˆå¦‚æœä¹‹å‰æœ‰é…ç½®äº‘ç«¯å¤‡ä»½ï¼‰
```

---

## ğŸ“š ç›¸å…³è„šæœ¬

| è„šæœ¬ | åŠŸèƒ½ | ç”¨æ³• |
|------|------|------|
| `backup-data.sh` | æ‰‹åŠ¨å¤‡ä»½ | `./scripts/backup-data.sh` |
| `restore-data.sh` | æ¢å¤å¤‡ä»½ | `./scripts/restore-data.sh` |
| `export-data.sh` | å¯¼å‡ºæ•°æ® | `./scripts/export-data.sh` |
| `import-data.sh` | å¯¼å…¥æ•°æ® | `./scripts/import-data.sh <folder>` |
| `check-privacy.sh` | æ£€æŸ¥éšç§ | `./scripts/check-privacy.sh` |

---

## âœ… æœ€ä½³å®è·µ

1. **æ¯å‘¨å¤‡ä»½ä¸€æ¬¡**
   ```bash
   ./scripts/backup-data.sh
   ```

2. **é‡è¦æ“ä½œå‰å¯¼å‡º**
   ```bash
   ./scripts/export-data.sh
   ```

3. **å®šæœŸæµ‹è¯•æ¢å¤**
   ```bash
   ./scripts/restore-data.sh
   ```

4. **äº‘ç«¯å¤‡ä»½ï¼ˆæ¨èï¼‰**
   - å¯¼å‡ºæ•°æ®åä¸Šä¼ åˆ°äº‘ç›˜
   - è®¾ç½®è‡ªåŠ¨åŒæ­¥

5. **Railway é…ç½®æŒä¹…åŒ–å·**
   - ç¡®ä¿æ•°æ®ä¸ä¼šåœ¨é‡å¯åä¸¢å¤±

---

## ğŸ¯ æ€»ç»“

âœ… **æœ¬åœ°æ•°æ®**ï¼šè‡ªåŠ¨ä¿å­˜åˆ° `data/`  
âœ… **è‡ªåŠ¨å¤‡ä»½**ï¼šå®æ—¶è§¦å‘ï¼Œä¿ç•™10ä¸ª  
âœ… **æ‰‹åŠ¨å¤‡ä»½**ï¼šéšæ—¶å¯ç”¨  
âœ… **æ•°æ®å¯¼å‡º**ï¼šä¾¿äºè¿ç§»  
âœ… **æ•°æ®å¯¼å…¥**ï¼šå¿«é€Ÿæ¢å¤  
âœ… **Railway æŒä¹…åŒ–**ï¼šé…ç½®å·å³å¯  

**æ‚¨çš„æ•°æ®æ°¸è¿œå®‰å…¨ï¼** ğŸ’¾

---

*æœ€åæ›´æ–°: 2025-11-21*  
*ç‰ˆæœ¬: v1.2*
